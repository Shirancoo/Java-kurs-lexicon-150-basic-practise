<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BudgetRPG</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/style.css" />
</head>
<body class="bg-dark text-light">

<header class="py-3 border-bottom border-secondary sticky-top bg-dark">
  <div class="container d-flex align-items-center justify-content-between">
    <div class="d-flex align-items-center gap-2">
      <span class="fs-4">üí∞</span>
      <div>
        <h1 class="h3 m-0 fw-bold">BudgetRPG</h1>
        <div class="text-secondary small">G√∂r din ekonomi till ett spel ‚Äì quests + budget i ett!</div>
      </div>
    </div>
    <div class="d-flex align-items-center gap-2">
      <span id="userEmail" class="text-secondary small"></span>
      <button id="logoutBtn" class="btn btn-outline-light btn-sm">Logga ut</button>
    </div>
  </div>
</header>

<main class="container my-4">

  <!-- AUTH -->
  <section id="authSection" class="card bg-body-tertiary border-0 shadow-sm mb-4">
    <div class="card-body">
      <h2 class="h4 mb-3">Logga in</h2>
      <div class="row g-3">
        <div class="col-md-4">
          <label class="form-label">E-post</label>
          <input id="email" type="email" class="form-control" placeholder="du@example.com">
        </div>
        <div class="col-md-4">
          <label class="form-label">L√∂senord</label>
          <input id="password" type="password" class="form-control" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
        </div>
        <div class="col-md-4">
          <label class="form-label">Visningsnamn (valfritt)</label>
          <input id="displayName" type="text" class="form-control" placeholder="Ditt namn">
        </div>
      </div>
      <div class="mt-3 d-flex gap-2">
        <button id="loginBtn" class="btn btn-primary">Logga in</button>
        <button id="registerBtn" class="btn btn-secondary">Registrera</button>
        <span id="authMsg" class="ms-2 text-warning small"></span>
      </div>
    </div>
  </section>

  <!-- LEVEL/XP -->
  <section id="progressSection" class="card bg-body-tertiary border-0 shadow-sm mb-4 d-none">
    <div class="card-body">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <h2 class="h4 m-0">Level & XP</h2>
        <span id="levelBadge" class="badge text-bg-primary">Lvl 1</span>
      </div>
      <div class="row g-4 align-items-center">
        <div class="col-auto">
          <div class="xp-ring position-relative">
            <div id="xpRing" class="xp-ring-fill"></div>
            <div class="xp-ring-center">
              <span id="xpPct" class="fw-bold">0%</span>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="progress" style="height: 10px;">
            <div id="xpFill" class="progress-bar" role="progressbar" style="width:0%"></div>
          </div>
          <div class="text-secondary small mt-2" id="xpText">0 / 100 XP</div>
          <div class="text-secondary small" id="questStats">Klara quests: 0</div>
        </div>
      </div>
    </div>
  </section>

  <!-- GRID: Budget + Quests -->
  <div class="row g-4">
    <!-- BUDGET -->
    <section id="budgetSection" class="col-lg-6">
      <div class="card bg-body-tertiary border-0 shadow-sm">
        <div class="card-body">
          <h2 class="h4 mb-3">üìä Budgetkalkylator</h2>

          <div class="mb-3">
            <label class="form-label">Inkomst (kr)</label>
            <input id="income" type="number" min="0" class="form-control" value="28000">
          </div>

          <div class="mb-3">
            <label class="form-label">Sparm√•l (kr)</label>
            <input id="goal" type="number" min="0" class="form-control" value="5000">
          </div>

          <div class="d-flex justify-content-between align-items-center mb-2">
            <span class="fw-semibold">Utgifter</span>
            <button id="addExpense" class="btn btn-sm btn-secondary">+ L√§gg till utgift</button>
          </div>
          <div id="expenses" class="vstack gap-2 mb-3"></div>

          <button id="calcBtn" class="btn btn-primary">Ber√§kna</button>

          <div id="budgetResult" class="mt-4 d-none">
            <div class="row text-center g-3">
              <div class="col">
                <div class="text-secondary small">Summa utgifter</div>
                <div id="sumExp" class="fs-5 fw-semibold">‚Äì</div>
              </div>
              <div class="col">
                <div class="text-secondary small">Kvar</div>
                <div id="remaining" class="fs-5 fw-semibold">‚Äì</div>
              </div>
              <div class="col">
                <div class="text-secondary small">M√•l</div>
                <div id="goalVal" class="fs-5 fw-semibold">‚Äì</div>
              </div>
            </div>

            <div class="progress my-3" style="height: 10px;">
              <div id="goalFill" class="progress-bar bg-info" role="progressbar" style="width:0%"></div>
            </div>

            <div class="d-flex justify-content-between align-items-center">
              <span id="statusChip" class="badge text-bg-warning">UNDER</span>
              <span id="goalText" class="text-secondary small">0%</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- QUESTS -->
    <section id="questsSection" class="col-lg-6">
      <div class="card bg-body-tertiary border-0 shadow-sm">
        <div class="card-body">
          <h2 class="h4 mb-3">üó°Ô∏è Quests</h2>

          <div class="mb-3">
            <label class="form-label">Titel</label>
            <input id="qTitle" class="form-control" placeholder="t.ex. Spara 1000 kr denna vecka">
          </div>
          <div class="mb-3">
            <label class="form-label">Beskrivning <span class="text-secondary">(valfritt)</span></label>
            <input id="qDesc" class="form-control" placeholder="...">
          </div>
          <div class="mb-3">
            <label class="form-label">F√∂rfallodatum</label>
            <input id="qDue" type="date" class="form-control">
          </div>
          <div class="d-flex gap-2 align-items-center mb-2">
            <button id="addQuest" class="btn btn-primary">Skapa quest</button>
            <span id="questMsg" class="text-warning small"></span>
          </div>

          <div class="d-flex justify-content-between">
            <h3 class="h6">Aktiva <span id="countActive" class="badge text-bg-success">0</span></h3>
            <h3 class="h6">Klarmarkerade <span id="countDone" class="badge text-bg-success">0</span></h3>
          </div>

          <div class="row g-3 mt-1">
            <div class="col">
              <ul id="listActive" class="list-unstyled vstack gap-2"></ul>
            </div>
            <div class="col">
              <ul id="listDone" class="list-unstyled vstack gap-2"></ul>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</main>

<footer class="border-top border-secondary py-3 mt-4">
  <div class="container text-secondary small">¬© BudgetRPG ‚Ä¢ Byggd med Spring Boot + statisk frontend</div>
</footer>

<!-- Confetti container -->
<div id="confetti" class="confetti d-none"></div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="/app.js"></script>
</body>
</html>